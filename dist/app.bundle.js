!function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=1)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=e.dom={create:function(t){return document.createElement(t)},img:function(t,e){var n=o.create("img");return n.src=t,n.title=e||t,n},script:function(t){var e=o.create("script");return e.src=t,e},swipe:function(t,e){var n={sx:0,sy:0,ex:0,ey:0};t.addEventListener("touchstart",function(t){n.sx=t.changedTouches[0].screenX,n.sy=t.changedTouches[0].screenY},!1),t.addEventListener("touchend",function(t){n.ex=t.changedTouches[0].screenX,n.ey=t.changedTouches[0].screenY,function(){var t=n.sx,o=n.sy,i=n.ex,r=n.ey;e(i<t?"left":i>t?"right":r<o?"down":r>o?"up":"tap")}()},!1)}},i=e.log={};["debug","log","info","warn","error"].forEach(function(t){i[t]=function(){}}),e.default={dom:o,log:i}},function(t,e,n){n(2),t.exports=n(5)},function(t,e,n){"use strict";function o(t){return t&&t.__esModule?t:{default:t}}var i=o(n(3)),r=o(n(4));n(0);new r.default({api:i.default,container:document.getElementById("photos"),lightbox:document.getElementById("lightbox")}).search("cats")},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(0),r=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners=[],this.state={search:null,isLoaded:!1,photos:[]},window.jsonFlickrFeed=function(t){i.log.info("handleFlickrJSON",t),e.state.photos=t.items.map(e.photo),e.state.isLoaded=!0,e.listeners.forEach(function(t){return e.notifyListener(t)})}}return o(t,[{key:"notifyListener",value:function(t){t(this.state.photos,this.state.search)}},{key:"photo",value:function(t){var e=t.media.m;return{sources:{small:e,large:e.replace(/_m\.jpg/,"_b.jpg")},title:t.title}}},{key:"search",value:function(t){this.state.search=t,this.state.photos=[],this.state.isLoaded=!1,this.fetch()}},{key:"fetch",value:function(){var t="https://api.flickr.com/services/feeds/photos_public.gne?format=json&tags="+this.state.search;document.head.appendChild(i.dom.script(t))}},{key:"onLoad",value:function(t){this.listeners.push(t),this.state.isLoaded&&this.notifyListener(t)}}]),t}();e.default=new r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),i=n(0),r=function(){function t(e){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.api=e.api,this.container=e.container,this.lightbox=e.lightbox,this.lightboxImage=e.lightbox.querySelector("img"),this.lightboxShadow=e.lightbox.querySelector("#lightbox-shadow"),this.lightboxTitle=e.lightbox.querySelector("#lightbox-title"),this.state={photos:[],selected:0,isLightbox:!1},this.api.onLoad(function(t,e){n.container.innerHTML=null,i.log.info(e,t),n.state.photos=[],t.forEach(function(t){var e=i.dom.img(t.sources.small,t.title);n.container.appendChild(e),n.state.photos.push(Object.assign({},t,{node:e}))}),n.state.photos.forEach(function(t,e){t.node.addEventListener("click",function(t){n.showLightbox(e)})})}),this.lightboxShadow.addEventListener("click",function(t){n.hideLightbox()}),window.addEventListener("keyup",function(t){"ArrowRight"===t.key?n.next():"ArrowLeft"===t.key&&n.prev()}),i.dom.swipe(document.body,function(t){console.debug("swipeDir",t),"left"===t?n.next():"right"===t&&n.prev()})}return o(t,[{key:"isValidIndex",value:function(t){return"number"==typeof t&&!(t<0||t>=this.state.photos.length)}},{key:"search",value:function(t){this.api.search(t)}},{key:"showLightbox",value:function(t){var e=this;if(!this.isValidIndex(t))return console.error("invalid index");console.debug("show lightbox"),this.state.isLightbox=!0,this.state.selected=t,this.lightbox.classList.add("lightbox--show");var n=this.state.photos[t];if(!n)return console.error("invalid photo");this.lightboxTitle.innerHTML=n.title||"(untitled)",function(t,e){var n=new Image;n.onload=function(){return e(t)},n.src=t}(n.sources.large,function(t){e.lightboxImage.src=t})}},{key:"hideLightbox",value:function(){console.debug("hide lightbox"),this.state.isLightbox=!1,this.lightbox.classList.remove("lightbox--show"),this.lightboxImage.removeAttribute("src")}},{key:"next",value:function(){console.debug("next");var t=this.state.selected;if(!this.isValidIndex(t))return console.error("invalid index");this.showLightbox(t+1)}},{key:"prev",value:function(){console.debug("prev");var t=this.state.selected;if(!this.isValidIndex(t))return console.error("invalid index");this.showLightbox(t-1)}}]),t}();e.default=r},function(t,e,n){var o=n(6);"string"==typeof o&&(o=[[t.i,o,""]]);var i={hmr:!0};i.transform=void 0;n(8)(o,i);o.locals&&(t.exports=o.locals)},function(t,e,n){(t.exports=n(7)(void 0)).push([t.i,"body {\n  background-color: white;\n  font-family: sans-serif; }\n\n#photos {\n  padding: 32px;\n  display: flex;\n  flex-wrap: wrap;\n  justify-content: space-between;\n  align-items: center; }\n  #photos img {\n    cursor: pointer;\n    margin: 16px; }\n\n#lightbox {\n  opacity: 0;\n  pointer-events: none;\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center; }\n  #lightbox #lightbox-shadow {\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    background-color: rgba(0, 0, 0, 0.85); }\n  #lightbox #lightbox-photo {\n    z-index: 1;\n    max-width: 80%;\n    max-height: 80%;\n    opacity: 0;\n    transition: 0.2s ease-in-out opacity; }\n  #lightbox #lightbox-title {\n    display: none; }\n  #lightbox.lightbox--show {\n    opacity: 1;\n    pointer-events: all; }\n    #lightbox.lightbox--show #lightbox-photo {\n      opacity: 1; }\n    #lightbox.lightbox--show #lightbox-title {\n      display: block;\n      width: 60%;\n      z-index: 1;\n      margin: 10px 0 0 0;\n      color: white;\n      text-align: center; }\n",""])},function(t,e){function n(t,e){var n=t[1]||"",o=t[3];if(!o)return n;if(e&&"function"==typeof btoa){var i=function(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}(o),r=o.sources.map(function(t){return"/*# sourceURL="+o.sourceRoot+t+" */"});return[n].concat(r).concat([i]).join("\n")}return[n].join("\n")}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var o=n(e,t);return e[2]?"@media "+e[2]+"{"+o+"}":o}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var o={},i=0;i<this.length;i++){var r=this[i][0];"number"==typeof r&&(o[r]=!0)}for(i=0;i<t.length;i++){var s=t[i];"number"==typeof s[0]&&o[s[0]]||(n&&!s[2]?s[2]=n:n&&(s[2]="("+s[2]+") and ("+n+")"),e.push(s))}},e}},function(t,e,n){function o(t,e){for(var n=0;n<t.length;n++){var o=t[n],i=f[o.id];if(i){i.refs++;for(s=0;s<i.parts.length;s++)i.parts[s](o.parts[s]);for(;s<o.parts.length;s++)i.parts.push(u(o.parts[s],e))}else{for(var r=[],s=0;s<o.parts.length;s++)r.push(u(o.parts[s],e));f[o.id]={id:o.id,refs:1,parts:r}}}}function i(t,e){for(var n=[],o={},i=0;i<t.length;i++){var r=t[i],s=e.base?r[0]+e.base:r[0],a={css:r[1],media:r[2],sourceMap:r[3]};o[s]?o[s].parts.push(a):n.push(o[s]={id:s,parts:[a]})}return n}function r(t,e){var n=d(t.insertInto);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var o=b[b.length-1];if("top"===t.insertAt)o?o.nextSibling?n.insertBefore(e,o.nextSibling):n.appendChild(e):n.insertBefore(e,n.firstChild),b.push(e);else if("bottom"===t.insertAt)n.appendChild(e);else{if("object"!=typeof t.insertAt||!t.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=d(t.insertInto+" "+t.insertAt.before);n.insertBefore(e,i)}}function s(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t);var e=b.indexOf(t);e>=0&&b.splice(e,1)}function a(t){var e=document.createElement("style");return t.attrs.type="text/css",c(e,t.attrs),r(t,e),e}function c(t,e){Object.keys(e).forEach(function(n){t.setAttribute(n,e[n])})}function u(t,e){var n,o,i,u;if(e.transform&&t.css){if(!(u=e.transform(t.css)))return function(){};t.css=u}if(e.singleton){var f=g++;n=p||(p=a(e)),o=l.bind(null,n,f,!1),i=l.bind(null,n,f,!0)}else t.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(n=function(t){var e=document.createElement("link");return t.attrs.type="text/css",t.attrs.rel="stylesheet",c(e,t.attrs),r(t,e),e}(e),o=function(t,e,n){var o=n.css,i=n.sourceMap,r=void 0===e.convertToAbsoluteUrls&&i;(e.convertToAbsoluteUrls||r)&&(o=v(o));i&&(o+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var s=new Blob([o],{type:"text/css"}),a=t.href;t.href=URL.createObjectURL(s),a&&URL.revokeObjectURL(a)}.bind(null,n,e),i=function(){s(n),n.href&&URL.revokeObjectURL(n.href)}):(n=a(e),o=function(t,e){var n=e.css,o=e.media;o&&t.setAttribute("media",o);if(t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}.bind(null,n),i=function(){s(n)});return o(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap)return;o(t=e)}else i()}}function l(t,e,n,o){var i=n?"":o.css;if(t.styleSheet)t.styleSheet.cssText=x(e,i);else{var r=document.createTextNode(i),s=t.childNodes;s[e]&&t.removeChild(s[e]),s.length?t.insertBefore(r,s[e]):t.appendChild(r)}}var f={},h=function(t){var e;return function(){return void 0===e&&(e=t.apply(this,arguments)),e}}(function(){return window&&document&&document.all&&!window.atob}),d=function(t){var e={};return function(t){if(void 0===e[t]){var n=function(t){return document.querySelector(t)}.call(this,t);if(n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}}(),p=null,g=0,b=[],v=n(9);t.exports=function(t,e){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(e=e||{}).attrs="object"==typeof e.attrs?e.attrs:{},e.singleton||(e.singleton=h()),e.insertInto||(e.insertInto="head"),e.insertAt||(e.insertAt="bottom");var n=i(t,e);return o(n,e),function(t){for(var r=[],s=0;s<n.length;s++){var a=n[s];(c=f[a.id]).refs--,r.push(c)}if(t){o(i(t,e),e)}for(s=0;s<r.length;s++){var c=r[s];if(0===c.refs){for(var u=0;u<c.parts.length;u++)c.parts[u]();delete f[c.id]}}}};var x=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e){t.exports=function(t){var e="undefined"!=typeof window&&window.location;if(!e)throw new Error("fixUrls requires window.location");if(!t||"string"!=typeof t)return t;var n=e.protocol+"//"+e.host,o=n+e.pathname.replace(/\/[^\/]*$/,"/");return t.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(t,e){var i=e.trim().replace(/^"(.*)"$/,function(t,e){return e}).replace(/^'(.*)'$/,function(t,e){return e});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return t;var r;return r=0===i.indexOf("//")?i:0===i.indexOf("/")?n+i:o+i.replace(/^\.\//,""),"url("+JSON.stringify(r)+")"})}}]);